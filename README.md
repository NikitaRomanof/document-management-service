# document-management-service

## Описание проекта

Проект представляет собой систему для работы с шаблонами документов и генерации PDF-файлов на их основе. Основные возможности:

- Хранение шаблонов документов в формате DOCX с поддержкой версионирования
- Генерация PDF-документов по шаблонам с подстановкой данных
- Управление документами клиентов (сохранение, извлечение, архивирование)
- Поддержка нескольких версий документов для одного клиента

## Основные функции

### Работа с шаблонами
- Загрузка новых версий шаблонов документов в систему
- Получение шаблонов по ID или названию (всегда возвращается последняя версия)
- Хранение истории версий каждого шаблона

### Генерация документов
- Создание PDF-документов на основе шаблонов и входных данных
- Поддержка пакетной генерации нескольких документов одновременно
- Предварительный просмотр документов перед сохранением

### Управление документами клиентов
- Сохранение сгенерированных документов с привязкой к клиенту и займу
- Получение отдельных документов или всех документов клиента
- Формирование ZIP-архивов с документами (все версии или только последние)

## Технологии

- **Java**
- **Spring Boot**
- **Spring Data JPA**
- **Swagger (OpenAPI 3.0)** для документации API
- DOCX/PDF генерация

## API Endpoints

### Контроллер документов (`DocumentsContractController`)
| Метод | Эндпоинт | Описание |
|-------|----------|----------|
| POST  | `/generate` | Генерация одного или нескольких документов |
| GET   | `/document` | Получение конкретного документа в PDF |
| POST  | `/individualContract/preview` | Предварительный просмотр документа |
| GET   | `/document/all` | Получение всех документов клиента (ZIP) |
| GET   | `/document/last` | Получение последних версий всех документов клиента (ZIP) |

### Контроллер шаблонов (`TemplateController`)
| Метод | Эндпоинт | Описание |
|-------|----------|----------|
| POST  | `/template/saveTemplate` | Сохранение нового шаблона документа |
| GET   | `/template/template` | Получение шаблона по ID |
| GET   | `/template/templateTitle` | Получение последней версии шаблона по названию |

## Установка и запуск

1. Клонировать репозиторий
2. Настроить подключение к БД в `application.properties`
3. Собрать проект: `mvn clean install`
4. Запустить: `java -jar target/IndividualContractServiceApplication.jar`
